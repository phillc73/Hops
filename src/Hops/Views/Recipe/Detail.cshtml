@using Hops.Models;
@model HopModel

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@{
    ViewBag.Title = "Recipe Viewer - Hops";
}

@section Scripts {
    <script src="~/lib/brauhaus/lib/brauhaus.min.js"></script>
    <script src="~/brauhaus/brauhaus-styles.min.js"></script>
    <script src="~/brauhaus/brauhaus-beerxml-brewtoad.js"></script>
}

@Html.Partial("Editor")

<script>
    $(document).ready(function () {
        loadRecipe();
    });

    async function loadRecipe() {
        var urlParts = window.location.href.split('/')
        var recipeId = urlParts[urlParts.length - 1];

        var recipe = await getRecipe(parseInt(recipeId));

        calculate(recipeId, recipe.beerxml);
        document.title = recipe.name + " - Hops"; 
    }
</script>